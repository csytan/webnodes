{% extends "base.html" %}

{% load tag_extras %}

{% block title %}
    <title>{{ forum }}</title>
{% endblock %}


{% block style %}
    <style>
        #content {
            width: 750px;
        }
        
        #sidebar {
            width: 200px;
            float: right;
            text-align: right;
        }
        
        #sidebar ul {
            margin: 0px;
        }
        
        #sidebar li {
            list-style-type: none;
        }
        
        #sidebar input {
            font-size: 1em;
        }
        
        #topics {
            width: 500px;
            margin: auto;
            margin-right: 220px;
        }
        
        .topic {
            margin-bottom: 15px;
        }

        .topic p {
            margin-bottom: 0px;
        }
    </style>
{% endblock %}

{% block script %}
    <script>
        $(document).ready(function(){
            $('#search').one('focus', function(){
                this.value = '';
            });
        });
    </script>
{% endblock %}


{% block content %}
    <div id="sidebar">
        <h2>
            <a href="/{{ forum }}/new_topic">start a topic</a>
        </h2>
        <form action="/{{forum}}/search" method="get">
            <input id="search" type="text" name="query" value="search forum" style="width: 70%">
            <input type="submit" value="go">
        </form>
        {{ sidebar|markdownify }}
    </div>

    <div id="topics">
        {% for topic in topics %}
            <div class="topic box">
                <h1>
                    <a href="/{{ forum }}/{{ topic.id }}">{{ topic.title }}</a>
                </h1>
                <p style="text-align:right">
                    {{ topic.num_comments }} comments,
                    {{ topic.updated|timeago }}, by
                    {% ifequal forum 'reddit' %}
                        <a href="http://www.reddit.com/user/{{ topic.author }}">{{ topic.author }}</a>
                    {% else %}
                        <a href="/users/{{ topic.author }}">{{ topic.author }}</a>
                    {% endifequal %}
                </p>
            </div>
        {% endfor %}
        
        {% if next %}
            <a href="/{{forum}}?next={{next}}" class="button">Next</a>
        {% endif %}
    </div>
{% endblock %}


