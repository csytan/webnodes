{% extends "base.html" %}


{% block title %}
    <title>webnodes | {{ topic['title'] }}</title>
{% end %}


{% block style %}
    <style>
        #content {
            width: 100%;
            max-width: 1500px;
        }
        
        canvas {
            z-index: 0;
            position: absolute;
        }
        
        .container {
            position: absolute;
            display: none;
            z-index: 1;
        }
        
        .comment {
            width: 350px;
            padding: 0.7em;
            margin: auto;
        }
        
        .topic {
            width: 600px;
            padding: 1em;
            margin: auto;
        }
        
        /* stuff within a comment */
        .comment_body {
            overflow: auto;
        }
        
        .comment_info {
            float: right;
        }
        
        .comment_controls {
            visibility: hidden;
            font-size: 0.8em;
        }

        .comment_nav {
            width: 260px;
            margin: auto;
        }

        .comment_nav a, 
        .comment_nav span {
            float: left;
            font-size: 1.2em;
            font-weight: normal;
            background-color: #59A5D1;
            color: white;
            text-align: center;
            visibility: hidden;
            padding: 0px;
        }
        
        .comment_nav a {
            width: 80px;
        }
        
        .comment_nav span {
            width: 100px;
        }
        
        a.prev {
            border-radius: 0 0 0 10px;
            -moz-border-radius: 0 0 0 10px;
            -webkit-border-radius: 0 0 0 10px;
        }
        
        a.next {
            border-radius: 0 0 10px 0;
            -moz-border-radius: 0 0 10px 0;
            -webkit-border-radius: 0 0 10px 0;
        }
        
        a.prev:hover,
        a.next:hover {
            background-color: #408BB6;
        }
        
        a.prev:active,
        a.next:active {
            background-color: #77C4EF;
        }
    </style>
{% end %}


{% block script %}
    <!--[if IE]>
        <script type="text/javascript" src="/static/excanvas.js"></script>
    <![endif]-->
    <script type="text/javascript" src="/static/topic.js"></script>
    <script>
        jQuery(function($){
            $('#{{ topic["id"] }}')
            .find('.comment')
            .addClass('topic')
            .end()
            .initTopic({{ graph }});
        });
    </script>
{% end %}



{% block content %}
    <noscript>
        <p style="text-align: center">Sorry, this site requires javascript</p>
    </noscript>

    {% for comment in comments %}
        <div id="{{ comment['id'] }}" class="container">
            <div class="comment box">
                <div class="comment_body">
                    {{ markdown(comment['body']) }}
                </div>
                <div class="comment_info">
                    {{ comment['points'] }} points,
                    <a href="http://www.reddit.com/user/{{ comment['author'] }}">{{ comment['author'] }}</a>,
                    {{ locale.format_date(comment['updated']) }}
                </div>
                <div style="clear:both"></div>
            </div>
            <div class="comment_nav">
                <a class="prev">«</a>
                <span class="page_num"></span>
                <a class="next">»</a>
            </div>
        </div>
    {% end %}
{% end %}
