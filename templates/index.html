{% extends "base.html" %}


{% block content %}
    {% for topic in topics %}
        <div class="topic_listing">
            <h2>
                <a href="{% if topic.link %}{{ topic.link }}{% else %}/{{ topic.id }}{% end %}">{{ escape(topic.title) }}</a>
            </h2>
            <p class="comment_info">
                {% if not current_user %}
                    <a class="vote_up sign_in" href="/sign_in?message=vote">+</a>
                {% elif topic.can_vote_up(current_user) %}
                    <a class="vote_up" href="/vote?way=up&amp;topic_id={{ topic.id }}">+</a>
                {% end %}
                
                <span class="points">
                    {{ topic.points }} {{ 'point' if topic.points in (1, -1) else 'points' }}
                </span>
                
                {% if topic.author %}
                    by <a href="/users/{{ topic.author.name }}">{{ topic.author.name }}</a>
                {% else %}
                    by anonymous
                {% end %}
                
                {{ relative_date(topic.created) }}
                &nbsp;|&nbsp;
                <a href="/{{ topic.id }}">
                    {% if not topic.n_comments %}
                        discuss
                    {% elif topic.n_comments == 1 %}
                        1 comment
                    {% else %}
                        {{ topic.n_comments }} comments
                    {% end %}
                </a>
            </p>
        </div>
    {% end %}
    
    {% if next_page %}
        <a href="/?page={{ next_page }}">Next Page</a>
    {% end %}
{% end %}
